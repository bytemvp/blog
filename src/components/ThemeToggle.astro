---
// ThemeToggle component for switching between light and dark themes
---

<button id="theme-toggle" aria-label="Toggle dark mode">
	<svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
		<circle cx="10" cy="10" r="5" fill="currentColor"/>
		<line x1="10" y1="1" x2="10" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
		<line x1="10" y1="17" x2="10" y2="19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
		<line x1="1" y1="10" x2="3" y2="10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
		<line x1="17" y1="10" x2="19" y2="10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
		<line x1="3.34" y1="3.34" x2="4.76" y2="4.76" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
		<line x1="15.24" y1="15.24" x2="16.66" y2="16.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
		<line x1="3.34" y1="16.66" x2="4.76" y2="15.24" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
		<line x1="15.24" y1="4.76" x2="16.66" y2="3.34" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
	</svg>
	<svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
		<path d="M17 10.5C17 14.6421 13.6421 18 9.5 18C5.35786 18 2 14.6421 2 10.5C2 6.35786 5.35786 3 9.5 3C9.67228 3 9.84308 3.00688 10.0124 3.02041C8.78451 4.23462 8 5.96012 8 7.875C8 11.6009 10.8991 14.5 14.625 14.5C15.7393 14.5 16.7866 14.2287 17.7082 13.7496C17.8956 12.6991 18 11.6125 17 10.5Z" fill="currentColor"/>
	</svg>
</button>

<style>
	#theme-toggle {
		background: none;
		border: none;
		cursor: pointer;
		padding: 0.5rem;
		display: flex;
		align-items: center;
		justify-content: center;
		color: rgb(var(--gray-dark));
		transition: color 0.2s ease;
	}

	#theme-toggle:hover {
		color: var(--accent);
	}

	.sun-icon,
	.moon-icon {
		width: 24px;
		height: 24px;
	}

	/* Show sun icon in dark mode, moon icon in light mode */
	[data-theme="light"] .sun-icon {
		display: none;
	}

	[data-theme="dark"] .moon-icon {
		display: none;
	}

	[data-theme="light"] .moon-icon {
		display: block;
	}

	[data-theme="dark"] .sun-icon {
		display: block;
	}
</style>

<script>
	import { toggleTheme } from './theme';

	// Add click handler
	const themeToggle = document.getElementById('theme-toggle');
	if (themeToggle) {
		themeToggle.addEventListener('click', () => {
			const newTheme = toggleTheme();
			// Update aria-label
			themeToggle.setAttribute(
				'aria-label',
				newTheme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'
			);
		});

		// Set initial aria-label
		const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
		themeToggle.setAttribute(
			'aria-label',
			currentTheme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'
		);
	}
</script>
