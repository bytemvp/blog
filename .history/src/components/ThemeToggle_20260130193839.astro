---
// ThemeToggle component for switching between light and dark themes
---

<button
	id="theme-toggle"
	class="inline-flex items-center justify-center rounded-md p-2 text-gray-dark transition-colors hover:text-accent"
	aria-label="Toggle dark mode"
>
	<svg
		class="hidden h-6 w-6 dark:block"
		width="20"
		height="20"
		viewBox="0 0 20 20"
		fill="none"
		xmlns="http://www.w3.org/2000/svg"
	>
		<circle cx="10" cy="10" r="5" fill="currentColor"/>
		<line x1="10" y1="1" x2="10" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
		<line x1="10" y1="17" x2="10" y2="19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
		<line x1="1" y1="10" x2="3" y2="10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
		<line x1="17" y1="10" x2="19" y2="10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
		<line x1="3.34" y1="3.34" x2="4.76" y2="4.76" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
		<line x1="15.24" y1="15.24" x2="16.66" y2="16.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
		<line x1="3.34" y1="16.66" x2="4.76" y2="15.24" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
		<line x1="15.24" y1="4.76" x2="16.66" y2="3.34" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
	</svg>
	<svg
		class="block h-6 w-6 dark:hidden"
		width="20"
		height="20"
		viewBox="0 0 20 20"
		fill="none"
		xmlns="http://www.w3.org/2000/svg"
	>
		<path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" fill="currentColor"/>
	</svg>
</button>

<script>
	import { toggleTheme } from './theme';

	// Add click handler
	const themeToggle = document.getElementById('theme-toggle');
	if (themeToggle) {
		themeToggle.addEventListener('click', () => {
			const newTheme = toggleTheme();
			// Update aria-label
			themeToggle.setAttribute(
				'aria-label',
				newTheme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'
			);
		});

		// Set initial aria-label
		const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
		themeToggle.setAttribute(
			'aria-label',
			currentTheme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'
		);
	}
</script>
